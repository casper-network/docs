"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7004],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8256:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var a=n(3117),r=n(102),o=(n(7294),n(3905)),i=["components"],s={},l="Important Commands",c={unversionedId:"dapp-dev-guide/tutorials/counter-testnet/commands",id:"dapp-dev-guide/tutorials/counter-testnet/commands",title:"Important Commands",description:"State Root Hash",source:"@site/source/docs/casper/dapp-dev-guide/tutorials/counter-testnet/commands.md",sourceDirName:"dapp-dev-guide/tutorials/counter-testnet",slug:"/dapp-dev-guide/tutorials/counter-testnet/commands",permalink:"/dapp-dev-guide/tutorials/counter-testnet/commands",editUrl:"https://github.com/casper-network/docs/tree/main/source/docs/casper/dapp-dev-guide/tutorials/counter-testnet/commands.md",tags:[],version:"current",lastUpdatedAt:1675445571,formattedLastUpdatedAt:"2/3/2023",frontMatter:{},sidebar:"dapp-dev-guide",previous:{title:"Overview",permalink:"/dapp-dev-guide/tutorials/counter-testnet/overview"},next:{title:"Tutorial Walkthrough",permalink:"/dapp-dev-guide/tutorials/counter-testnet/walkthrough"}},p={},d=[{value:"State Root Hash",id:"state-root-hash",level:2},{value:"Querying Network State",id:"querying-network-state",level:2},{value:"Put Deploys (onto the Chain)",id:"put-deploys-onto-the-chain",level:2},{value:"Deploy via a compiled Wasm binary",id:"deploy-via-a-compiled-wasm-binary",level:3},{value:"Deploy via a named key already on the blockchain",id:"deploy-via-a-named-key-already-on-the-blockchain",level:3},{value:"Get Deploys (from the Chain)",id:"get-deploys-from-the-chain",level:2}],u={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"important-commands"},"Important Commands"),(0,o.kt)("h2",{id:"state-root-hash"},"State Root Hash"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"casper-client get-state-root-hash --node-address [NODE_SERVER_ADDRESS]\n")),(0,o.kt)("p",null,"The first command that we will cover as part of the ",(0,o.kt)("em",{parentName:"p"},"casper-client")," tool is the ",(0,o.kt)("em",{parentName:"p"},"get-state-root-hash")," command. The state root hash is an identifier of the current network state. It is similar to a Git commit ID for commit history. It gives a snapshot of the blockchain state at a moment in time. For this tutorial, it will be used to query the network state after sending deploys."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"After sending deploys to the network, you must get the new state root hash to see the changes reflected. Otherwise, you will be looking at events in the past."))),(0,o.kt)("h2",{id:"querying-network-state"},"Querying Network State"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},'casper-client query-global-state \\\n    --node-address [NODE_SERVER_ADDRESS] \\\n    --state-root-hash [STATE_ROOT_HASH] \\\n    --key [ACCOUNT_HASH] \\\n    -q "[SESSION_NAME]/[SESSION_NAMED_KEY]" (OPTIONAL)\n')),(0,o.kt)("p",null,"This command allows you to query the state of a Casper network at a given moment in time, which is specified by the ",(0,o.kt)("em",{parentName:"p"},"state-root-hash")," described above."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("em",{parentName:"li"},"node-address")," is the server on the network."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("em",{parentName:"li"},"key")," is the identifier for the query. It must be either the account public key, account hash, contract address hash, transfer hash, or deploy hash. We will demonstrate two of these key types in this tutorial."),(0,o.kt)("li",{parentName:"ul"},"The optional query path argument (",(0,o.kt)("em",{parentName:"li"},"q"),") allows you to drill into the specifics of a query concerning the key.")),(0,o.kt)("h2",{id:"put-deploys-onto-the-chain"},"Put Deploys (onto the Chain)"),(0,o.kt)("h3",{id:"deploy-via-a-compiled-wasm-binary"},"Deploy via a compiled Wasm binary"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"casper-client put-deploy \\\n    --node-address [NODE_SERVER_ADDRESS] \\\n    --chain-name casper-test \\\n    --secret-key [KEY_PATH]/secret_key.pem \\\n    --payment-amount 5000000000000 \\\n    --session-path [CONTRACT_PATH]/counter-define.wasm\n")),(0,o.kt)("p",null,"This command creates a deploy and sends it to the network for execution. In this first usage of the command,"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("em",{parentName:"li"},"session-path")," points to a compiled Wasm contract."),(0,o.kt)("li",{parentName:"ul"},"This contract is then installed on the network specified by the ",(0,o.kt)("em",{parentName:"li"},"chain-name"),'. The Testnet is "casper-test" but this is configurable.'),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("em",{parentName:"li"},"payment-amount")," is in units of motes (1 nano-CSPR) and is required to pay the transaction fee for the deploy. If it is too small, the transaction will get denied due to insufficient funds.")),(0,o.kt)("h3",{id:"deploy-via-a-named-key-already-on-the-blockchain"},"Deploy via a named key already on the blockchain"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},'casper-client put-deploy \\\n    --node-address [NODE_SERVER_ADDRESS] \\\n    --chain-name casper-test \\\n    --secret-key [KEY_PATH]/secret_key.pem \\\n    --payment-amount 5000000000000 \\\n    --session-name "counter" \\\n    --session-entry-point "counter_inc"\n')),(0,o.kt)("p",null,"This second usage of ",(0,o.kt)("em",{parentName:"p"},"put-deploy")," does not place a new contract on the chain, but it allows you to call entry points (functions) defined in smart contracts."),(0,o.kt)("p",null,'Here we show the example using "counter" and "counter_inc" because, in the ',(0,o.kt)("a",{parentName:"p",href:"/dapp-dev-guide/tutorials/counter-testnet/walkthrough"},"Counter tutorial"),', we have defined a smart contract by the name of "counter", and there is an entry-point named "counter_inc" defined within it. However, these will be different when you write your contracts.'),(0,o.kt)("h2",{id:"get-deploys-from-the-chain"},"Get Deploys (from the Chain)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"casper-client get-deploy \\\n    --node-address [NODE_SERVER_ADDRESS] \\\n    [DEPLOY_HASH]\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("em",{parentName:"p"},"get-deploy")," command is complementary to the ",(0,o.kt)("em",{parentName:"p"},"put-deploy")," command. It retrieves a deploy from the network and allows you to check the status of the deploy. The ",(0,o.kt)("em",{parentName:"p"},"DEPLOY_HASH")," is the identifier to a specific deploy and is returned by the ",(0,o.kt)("em",{parentName:"p"},"put-deploy")," command."))}m.isMDXComponent=!0}}]);