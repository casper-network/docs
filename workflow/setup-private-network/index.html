<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="search" type="application/opensearchdescription+xml" title="Casper" href="/opensearch.xml"><title data-rh="true">Set Up a Private Casper Network | Casper</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://operators.casper.network//workflow/setup-private-network/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Set Up a Private Casper Network | Casper"><meta data-rh="true" name="description" content="Casper private networks operate in a similar way to the Casper public network. The significant difference in private networks is a closed validator set and having administrator account(s) which can control regular accounts. Hence, there are specific configurations when setting up the genesis block and administrator accounts. Besides the main configuration options that the Casper platform provides, each customer may add other configuration options when setting up a private network."><meta data-rh="true" property="og:description" content="Casper private networks operate in a similar way to the Casper public network. The significant difference in private networks is a closed validator set and having administrator account(s) which can control regular accounts. Hence, there are specific configurations when setting up the genesis block and administrator accounts. Besides the main configuration options that the Casper platform provides, each customer may add other configuration options when setting up a private network."><link data-rh="true" rel="icon" href="/image/favicon.ico"><link data-rh="true" rel="canonical" href="https://operators.casper.network//workflow/setup-private-network/"><link data-rh="true" rel="alternate" href="https://operators.casper.network//workflow/setup-private-network/" hreflang="en"><link data-rh="true" rel="alternate" href="https://operators.casper.network//workflow/setup-private-network/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KQNX60E7J5-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ab16f509.css">
<link rel="preload" href="/assets/js/runtime~main.12468f53.js" as="script">
<link rel="preload" href="/assets/js/main.248ea3bd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/icon/logo-dark.svg" alt="Casper Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/icon/logo-white.svg" alt="Casper Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/workflow/">How To&#x27;s</a><a class="navbar__item navbar__link" href="/dapp-dev-guide/">Developers</a><a class="navbar__item navbar__link" href="/operators/">Operators</a><a class="navbar__item navbar__link" href="/design/">Design</a><a class="navbar__item navbar__link" href="/economics/">Economics</a><a class="navbar__item navbar__link" href="/staking/">Staking</a><a class="navbar__item navbar__link" href="/glossary/">Glossary</a><a class="navbar__item navbar__link" href="/faq/">FAQ</a><a href="https://discord.com/invite/Q38s3Vh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_dNtB"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/workflow/setup-private-network/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><a href="https://github.com/casper-network/docs-app" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/block-explorer/">Block Explorers on Casper Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/staking/">How to Stake your CSPR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/ledger-setup/">Ledger Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/signer-guide/">Casper Signer User Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/token-transfer/">Transferring Tokens using a Block Explorer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/testnet-faucet/">Funding Testnet Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/workflow/setup-private-network/">Set Up a Private Casper Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/staging-files-for-new-network/">Staging Files for a New Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/setup/">Development Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/querying/">Querying the Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/account-hash/">Account Hash</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/two-party-multi-sig/">Two-Party Multi-Signature Deploys</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/workflow/transfers/">Transferring Tokens</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/delegate/">Delegating with the Command-line</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/undelegate/">Undelegating Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/workflow/contribute/">Contributing Documentation</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/workflow/setup-private-network/">Set Up a Private Casper Network</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Set Up a Private Casper Network</h1><p>Casper private networks operate in a similar way to the Casper public network. The significant difference in private networks is a closed validator set and having administrator account(s) which can control regular accounts. Hence, there are specific configurations when setting up the genesis block and administrator accounts. Besides the main configuration options that the Casper platform provides, each customer may add other configuration options when setting up a private network.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">‚Äã</a></h2><p>Follow these guides to set up the required environment and user accounts.</p><ul><li><a href="/workflow/setup/#the-casper-command-line-client">Setting up the Casper client</a></li><li><a href="https://github.com/casper-network/casper-node/blob/master/client/README.md#casper-client" target="_blank" rel="noopener noreferrer">Setting up the client for interacting with the network</a></li><li><a href="/workflow/setup/#setting-up-an-account">Setting up an account</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-1-setting-up-a-validator-node">Step 1. Setting up a Validator Node<a class="hash-link" href="#step-1-setting-up-a-validator-node" title="Direct link to heading">‚Äã</a></h2><p>A <a href="/glossary/N/#node">Casper node</a> is a physical or virtual device participating in the Casper network. You need to set up several <a href="/glossary/V/#validator">validator</a> nodes on your private network. An <a href="/glossary/O/#operator">operator</a> who has won an <a href="/glossary/A/#auction">auction</a> bid will be a validator for the private network.</p><p>Use the below guides to set up and manage validator nodes.</p><ul><li><a href="https://github.com/casper-network/casper-node/tree/master/resources/production#casper-node-setup" target="_blank" rel="noopener noreferrer">Casper node setup - GitHub guide</a>: A guide to configuring a system with the new Rust node to operate within a network.</li><li><a href="/operators/setup/">Basic node setup tutorial</a>: A guide on using the <code>casper-node-launcher</code>, generating directories and files needed for running casper-node versions and performing upgrades, generating keys, and setting up the configuration file for nodes.</li><li><a href="https://docs.cspr.community/" target="_blank" rel="noopener noreferrer">Set up Mainnet and Testnet validator nodes</a>: A set of guides for Mainnet and Testnet node-operators on setting up and configuring their Casper network validator nodes.</li></ul><p>Use these FAQ collections for tips and details for validators.</p><ul><li><a href="https://docs.casperlabs.io/faq/faq-validator/" target="_blank" rel="noopener noreferrer">FAQs for basic validator node </a></li><li><a href="https://docs.cspr.community/docs/faq-validator.html" target="_blank" rel="noopener noreferrer">FAQs on Main Net and Test Net validator node setup</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-2-setting-up-the-directory">Step 2. Setting up the Directory<a class="hash-link" href="#step-2-setting-up-the-directory" title="Direct link to heading">‚Äã</a></h2><p>Use these guides to set up your private network directories. You will find several main directories dedicated to different purposes.</p><ul><li>Go through the <a href="/operators/setup/#file-locations">file location</a> section to understand how directories are created and managed in a Casper private network.</li><li>Refer to the <a href="/operators/create/">setting up a new network</a> guide to identify the required configuration files to set up a genesis block.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-3-configuring-the-genesis-block">Step 3. Configuring the Genesis Block<a class="hash-link" href="#step-3-configuring-the-genesis-block" title="Direct link to heading">‚Äã</a></h2><p>A Casper private network contains a different set of configurations when compared to the public network. The <a href="/glossary/C/#chainspec"><code>chainspec.toml</code></a> file contains the required configurations for the genesis process in a private network.</p><p>You should add the configuration options below to the <code>chainspec.toml</code> file inside the <a href="/workflow/setup-private-network/#step-2-setting-up-the-directory">private network directory</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="unrestricted-transfers-configuration">Unrestricted transfers configuration<a class="hash-link" href="#unrestricted-transfers-configuration" title="Direct link to heading">‚Äã</a></h3><p>This option disables unrestricted transfers between regular accounts. A regular account user cannot do a fund transfer when this attribute is set to false. Only administrators can transfer tokens freely between users and other administrators.</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allow_unrestricted_transfers = false</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In contrast, users in the public network can freely transfer funds to different accounts.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>A Casper private network doesn&#x27;t support the minting process. Only admininstrator accounts can maintain funds. This is enabled by configuring these options:</h5></div><div class="admonition-content"><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allow_unrestricted_transfers = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compute_rewards = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allow_auction_bids = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">refund_handling = { type = &quot;refund&quot;, refund_ratio = [1, 1] }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fee_handling = { type = &quot;accumulate&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">administrators = [&quot;ADMIN_PUBLIC_KEY&quot;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="refund-handling-configuration">Refund handling configuration<a class="hash-link" href="#refund-handling-configuration" title="Direct link to heading">‚Äã</a></h3><p>This option manages the refund behavior at the finalization of a deploy execution. It changes the way the Wasm execution fees are distributed. After each deploy execution, the network calculates the amount of gas spent for the execution and manages to refund any remaining tokens to the user.</p><p>A <code>refund_ratio</code> is specified as a proper fraction (the numerator must be lower or equal to the denominator). In the example below, the <code>refund_ratio</code> is 1:1. If 2.5 CSPR is paid upfront and the gas fee is 1 CSPR, 1.5 CSPR will be given back to the user.</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">refund_handling = { type = &quot;refund&quot;, refund_ratio = [1, 1] }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>After deducting the gas fee, the distribution of the remaining payment amount is handled based on the <a href="/workflow/setup-private-network/#fee-handling-config">fee_handling</a> configuration.</p><p>The default configuration for a public chain, including the Casper Mainet, looks like this:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">refund_handling = { type = &quot;refund&quot;, refund_ratio = [0, 100] }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The refund variant with <code>refund_ratio</code> of <!-- -->[0, 100]<!-- --> means that 0% is given back to the user after deducting gas fees. In other words, if a user paid 2.5 CSPR and the gas fee is 1 CSPR, the user will not get the remaining 1.5 CSPR in return.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="fee-handling-configuration">Fee handling configuration<a class="hash-link" href="#fee-handling-configuration" title="Direct link to heading">‚Äã</a></h3><p>This option defines how to distribute the fees after refunds are handled. While refund handling defines the amount we pay back after a transaction, fee handling defines the methods of fee distribution after a refund is performed.</p><p>Set up the configuration as below:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fee_handling = { type = &quot;pay_to_proposer&quot; }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The <code>fee_handling</code> configuration has three variations:</p><ul><li><code>pay_to_proposer</code>: The rest of the payment amount after deducing the gas fee from a refund is paid to the block&#x27;s <a href="/glossary/P/#proposer">proposer</a>.</li><li><code>burn</code>: The tokens paid are burned, and the total supply is reduced.</li><li><code>accumulate</code>: The funds are transferred to a special accumulation purse. Here, the accumulation purse is owned by a handle payment system contract, and the amount is distributed among all the administrators defined at the end of a switch block. The fees are paid to the purse owned by the handle payment contract, and no tokens are transferred to the proposer when this configuration is enabled.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="auction-behavior-configuration">Auction behavior configuration<a class="hash-link" href="#auction-behavior-configuration" title="Direct link to heading">‚Äã</a></h3><p>A private network requires to have a fixed set of validators. This configuration restricts the addition of new validators to the private network. Hence, you are not allowed to bid new entries into the validator set.</p><p>Use the configuration below to limit the auction validators:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">allow_auction_bids = false</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Other configurations related to the auction:</p><ul><li><code>allow_auction_bids</code> - if this option is set to <em>false</em> then <code>add_bid</code> and <code>delegate</code> options are disabled. It also disables adding new validators to the system. Invoking those entry points leads to an <code>AuctionBidsDisabled</code> error.</li><li><code>core.compute_rewards</code> - if this option is set to <em>false</em>, then all the rewards on a switch block will be set to 0. The auction contract wouldn&#x27;t process rewards distribution that would increase validator bids.</li></ul><p>In a public network, <code>allow_auction_bid</code> is set to <em>true</em>, which allows bidding for new entries and validator nodes.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-4-configuring-the-administrator-accounts">Step 4. Configuring the Administrator Accounts<a class="hash-link" href="#step-4-configuring-the-administrator-accounts" title="Direct link to heading">‚Äã</a></h2><p>An administrator is mandatory for a private network since it manages all the other <a href="/glossary/V/#validator">validator</a> accounts. There should be at least one administrator account configured within a network to operate it as a <code>private network</code>. You can create new administrators and <a href="/workflow/setup-private-network/#step-6-rotating-the-validator-accounts">rotate the validator set</a> in a single configuration update. The operator must first ensure the <code>global_state.toml</code> file contains new administrators. The validator set is updated after if an administrator is also a validator. Also, only the administrator accounts can hold and distribute token balances.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="configuring-administrator-accounts">Configuring administrator accounts<a class="hash-link" href="#configuring-administrator-accounts" title="Direct link to heading">‚Äã</a></h3><p>Use this configuration option in the <code>chainspec.toml</code> to add administrator accounts to the private network:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">administrators = [&quot;NEW_ACCOUNT_PUBLIC_KEY&quot;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>Note</strong>: Regular accounts are not allowed to manage their associated keys on a private network.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="generating-new-administrator-accounts">Generating new administrator accounts<a class="hash-link" href="#generating-new-administrator-accounts" title="Direct link to heading">‚Äã</a></h3><p>Use the command below to generate new administrator accounts in your private network. This generates the contents of a <code>global_state.toml</code> with the entries required to create new administrator accounts at the upgrade point.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">global-state-update-gen \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  generate-admins --data-dir $DATA_DIR/global_state \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --state-hash $STATE_ROOT_HASH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --admin $PUBLIC_KEY_HEX, $BALANCE</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><code>NEW_PUBLIC_KEY</code> - Public key of the administrator in a hex format.</li><li><code>NEW_BALANCE</code> - Balance for the administrator‚Äôs main purse.</li><li><code>DATA_DIR</code> - Path to the global state directory.</li><li><code>STATE_ROOT_HASH</code> - State root hash, taken from the latest block before an upgrade.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="managing-accounts-and-smart-contracts">Managing accounts and smart contracts<a class="hash-link" href="#managing-accounts-and-smart-contracts" title="Direct link to heading">‚Äã</a></h3><p>Only administrators have permission to control accounts and manage smart contracts in a private network. An example implementation can be found in <a href="https://github.com/casper-network/casper-node/blob/c8023736786b2c2b0fd17250fcfd50502ff4151f/smart_contracts/contracts/private_chain/control-management/src/main.rs" target="_blank" rel="noopener noreferrer">Casper node&#x27;s private chain control management</a> file. This is not an existing contract. You can use the existing client contracts as an administrator to perform actions as a user. This is done by sending a deploy under a regular user&#x27;s public key but signed using the administrator&#x27;s secret key.</p><p>Use this command to generate these contracts:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">make build-contracts-rs</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Only the administrator can use the related Wasm to send the deploy to the network and then use it to manage, enable, and disable contracts. This is achieved through entry points that handle enabling and disabling options for account and smart contracts:</p><ul><li><strong>To disable a contract</strong>: Execute the <code>disable_contract.wasm</code> with <code>contract_hash</code>and <code>contract_package_hash</code> as parameters.</li><li><strong>To enable a contract</strong>: Execute the <code>enable_contract.wasm</code> with <code>contract_hash</code>and <code>contract_package_hash</code> as parameters.</li><li><strong>To disable an account</strong>: Execute <code>set_action_thresholds.wasm</code> with argument <code>deploy_threshold:u8=&#x27;255&#x27;</code> and <code>key_management_threshold:u8=&#x27;255&#x27;</code>.</li><li><strong>To enable an account</strong>: Execute <code>set_action_thresholds.wasm</code> with <code>deploy_threshold:u8=&#x27;1&#x27;</code> set to 1 and <code>key_management_threshold:u8=&#x27;0&#x27;</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-5-starting-the-casper-node">Step 5. Starting the Casper Node<a class="hash-link" href="#step-5-starting-the-casper-node" title="Direct link to heading">‚Äã</a></h2><p>After preparing the administrator accounts and validator nodes, you should start and run the Casper node to see the changes. Use this command to start the node:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start casper-node-launcher</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Refer to the <a href="https://github.com/casper-network/casper-node/tree/master/resources/production#casper-node-setup" target="_blank" rel="noopener noreferrer">Casper node setup GitHub</a> guide to know more details about configuring a new node to operate within a network.</p><p>Additionally, refer to the <a href="https://github.com/casper-network/casper-node-launcher" target="_blank" rel="noopener noreferrer">casper-node-launcher</a> to check whether the installed node binaries match the installed configurations by comparing the version numbers.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-6-rotating-the-validator-accounts">Step 6. Rotating the Validator Accounts<a class="hash-link" href="#step-6-rotating-the-validator-accounts" title="Direct link to heading">‚Äã</a></h2><p>You need to go through <a href="/#step-1-setting-up-the-validator-nodes">setting up a validator node </a> guide before starting this section.</p><p>To rotate the validators set, you must perform a network upgrade using a <code>global_state.toml</code> with new entries generated by the <code>global-state-update-gen</code> command.</p><p>When rotating validators manually, you will need to do so after the start of a new era. This allows you to obtain the state root hash from the final block in an era, known as the switch block.</p><p>After acquiring the state root hash from the switch block, you must stop the network. The following command allows you to use the acquired state root hash to generate a new <code>global_state.toml</code>.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">global-state-update-gen validators \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data-dir $DATA_DIR/global_state \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --state-hash $STATE_ROOT_HASH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ‚Äì-validator $PUBLIC_KEY_HEX,$STAKE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ‚Äì-validator $PUBLIC_KEY_HEX,$STAKE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Each use of the <code>--validator</code> parameter designates a validator for the next era. Only validators added using this parameter will be included in the new era, hence removing a validator only requires you to not add them with this parameter.</p><p>After designating the next era&#x27;s validators, you must set the chainspec activation point and <code>last_emergency_restart</code> to <code>X</code>, where <code>X</code> is equal to the new era after the switch block from above. Finally, set <code>hard_reset = true</code>. This makes the network revert to the end of the previous era when restarted with the upgrade.</p><p>For example, to rotate the validators in era 10, one would need to wait for the end of era 9. After acquiring the state root hash from the final block of era 9, you would stop the network, run <code>global-state-update-gen</code>, set the activaction point and <code>last_emergency_restart</code> to 10 and <code>hard_reset</code> to <code>true</code>.</p><p>You can now stage the upgrade by copying the chainspecs, configs and binaries where they should be while the network is still down. Once these are in place, you can restart the network with rotated validators.</p><p>::note</p><p>Please make sure you are running this tool as the same user that owns <code>$DATA_DIR</code>. Otherwise, you may receive a permission denied error.</p><p>:::</p><p>You can find more details on enabling new validators in the <a href="/operators/joining/">joining a running network</a> guide. The guide explains how to join the network and provide additional security to the system.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="step-7-testing-the-private-network">Step 7. Testing the Private Network<a class="hash-link" href="#step-7-testing-the-private-network" title="Direct link to heading">‚Äã</a></h2><p>We will describe the testing flow using an example customer and the configuration below. These options are relative to this example customer.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="sample-configuration-files">Sample configuration files<a class="hash-link" href="#sample-configuration-files" title="Direct link to heading">‚Äã</a></h3><p>Here are sample configurations that can be adapted for testing:</p><ul><li>A <a href="https://github.com/casper-network/casper-node/blob/0b4eead8ea1adffaea98260fe2e69dfc8b71c092/resources/private/chainspec.toml.in" target="_blank" rel="noopener noreferrer">chainspec template</a> that is specific to the customer&#x27;s private chain.</li><li>An <a href="https://github.com/casper-network/casper-node/blob/0b4eead8ea1adffaea98260fe2e69dfc8b71c092/resources/private/accounts.toml.in" target="_blank" rel="noopener noreferrer">accounts template</a> with one administrator in the <code>administrators</code> settings.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="specifying-ip-addresses">Specifying IP addresses<a class="hash-link" href="#specifying-ip-addresses" title="Direct link to heading">‚Äã</a></h3><p>Here is an example set of IP addresses in use:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">http://18.224.190.213:7777</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://18.188.11.97:7777</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://18.188.206.170:7777</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://18.116.201.114:7777</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="setting-up-the-node">Setting up the node<a class="hash-link" href="#setting-up-the-node" title="Direct link to heading">‚Äã</a></h3><p>Set up the node address, chain name, and the administrator&#x27;s secret key.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">export NODE_ADDR=http://18.224.190.213:7777</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CHAIN_NAME=&quot;private-test&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This testing example will also use an <code>alice/secret_key.pem</code> file, a secret key generated through the <a href="/dapp-dev-guide/keys/#creating-accounts-and-keys">keys generation process</a>. Alice is a regular user in this testing example.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="network-access-control">Network access control<a class="hash-link" href="#network-access-control" title="Direct link to heading">‚Äã</a></h3><p>With a default configuration each node generates a self-signed certificate to encrypt peer-to-peer communication. This means any person can join an existing network, and sync with the network, which in private chains may not be allowed.</p><p>To restrict access for new nodes joining an existing private chain network, the node software supports loading signed client certificates by a certificate authority (CA).</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[network.identity]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tls_certificate = &quot;local_node_cert.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">secret_key = &quot;local_node.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca_certificate = &quot;ca_cert.pem&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><code>tls_certificate</code> is the certificate signed by a <code>ca_cert.pem</code>.</li><li><code>secret_key</code> refers to a secret key that should be unique to a specific node in the network. All peer-to-peer communication coming from this node will be signed by this key.</li><li><code>ca_certificate</code> is the network CA that should be the same on each of the nodes.</li></ul><p>To set up CA and sign client certificates for a network here are the steps to follow using an openssl command line:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># Recommended EC curve algorithm to use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CURVE=&quot;secp521r1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate secret key for CA and save it to ca_key.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl ecparam -out ca_key.pem -name $CURVE -genkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create ca_cert.pem signed by ca_key.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -new -x509 -days 3650 -extensions v3_ca -key ca_key.pem -out ca_cert.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Generate secret key for a node and a certificate signed by the CA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl ecparam -out node_1.pem -name $CURVE -genkey</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -new -key node_1.pem -out node_1.csr -sha256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl x509 -req -days 3650 -CA ca_cert.pem -CAkey ca_key.pem -CAcreateserial -in node_1.csr -out node_1_cert.pem</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>And then configure the node with the following settings:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[network.identity]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tls_certificate = &quot;node_1_cert.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">secret_key = &quot;node_1.pem&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca_certificate = &quot;ca_cert.pem&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Every node in the private chain network has to be configured with the same CA certificate, and each <code>tls_certificate</code> and <code>secret_key</code> pair has to be signed by it. Any node trying to join with a certificate signed by an incorrect CA ends up with the following log message:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">2022-09-01T12:08:53.031417Z DEBUG init:incoming{; peer_addr=127.0.0.1:50998}: [casper_node::components::small_network small_network.rs:501] incoming connection failed early; err=TLS validation error of peer certificate: the certificate is not signed by provided certificate authority</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Keep in mind that for security reasons <code>ca_key.pem</code> should be stored securely and never present on each of participating machines.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="funding-alices-account">Funding Alice&#x27;s account<a class="hash-link" href="#funding-alices-account" title="Direct link to heading">‚Äã</a></h3><p>The following command transfers tokens to Alice&#x27;s account.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  transfer \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n $NODE_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --chain-name $CHAIN_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --secret-key admin/secret_key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-account=$(&lt;admin/public_key_hex) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --target-account=$(&lt;alice/public_key_hex) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --amount=100000000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --payment-amount=3000000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --transfer-id=123</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To check the account information, use this command:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client get-account-info -n $NODE_ADDR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --public-key alice/public_key.pem</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-a-bid-as-alice">Adding a bid as Alice<a class="hash-link" href="#adding-a-bid-as-alice" title="Direct link to heading">‚Äã</a></h3><p>The following command attempts to add an auction bid on the network. It should return <code>ApiError::AuctionError(AuctionBidsDisabled) [64559]</code>.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  put-deploy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n $NODE_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --chain-name $CHAIN_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --secret-key alice/secret_key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-path add_bid.wasm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --payment-amount 5000000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;public_key:public_key=&#x27;$(&lt;alice/public_key_hex)&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;amount:u512=&#x27;10000&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;delegation_rate:u8=&#x27;5&#x27;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Error: ApiError::AuctionError(AuctionBidsDisabled) [64559]&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We should get a similar error for the delegate entry point.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="disabling-alices-account">Disabling Alice&#x27;s account<a class="hash-link" href="#disabling-alices-account" title="Direct link to heading">‚Äã</a></h3><p>The following command disables Alice&#x27;s account. In this case, executing deploys with Alice&#x27;s account will not be successful.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  put-deploy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n $NODE_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --chain-name $CHAIN_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --secret-key admin/secret_key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-account=alice/public_key_hex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-path set_action_thresholds.wasm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --payment-amount=2500000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;key_management_threshold:u8=&#x27;255&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;deploy_threshold:u8=&#x27;255&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="enabling-alices-account">Enabling Alice&#x27;s account<a class="hash-link" href="#enabling-alices-account" title="Direct link to heading">‚Äã</a></h3><p>The following command enables Alice&#x27;s account. In this case, executing deploys with Alice&#x27;s account will be successful.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  put-deploy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n $NODE_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --chain-name $CHAIN_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --secret-key admin/secret_key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-account=alice/public_key_hex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-path set_action_thresholds.wasm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --payment-amount=2500000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;key_management_threshold:u8=&#x27;0&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;deploy_threshold:u8=&#x27;1&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="enabling-a-contract">Enabling a contract<a class="hash-link" href="#enabling-a-contract" title="Direct link to heading">‚Äã</a></h3><p>The following command enables a contract using its hash.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  put-deploy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n $NODE_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --chain-name $CHAIN_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --secret-key admin/secret_key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-account=$(&lt;alice/public_key_hex) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-path enable_contract.wasm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --payment-amount 3000000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;contract_package_hash:account_hash=&#x27;account-hash-$CONTRACT_PACKAGE_HASH&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;contract_hash:account_hash=&#x27;account-hash-$CONTRACT_HASH&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="disabling-a-contract">Disabling a contract<a class="hash-link" href="#disabling-a-contract" title="Direct link to heading">‚Äã</a></h3><p>The following command disables a contract using its hash. Executing this contract using <code>CONTRACT_HASH</code> again should fail.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  put-deploy \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -n $NODE_ADDR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --chain-name $CHAIN_NAME \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --secret-key admin/secret_key.pem \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-account=$(&lt;alice/public_key_hex) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-path disable_contract.wasm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --payment-amount 3000000000 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;contract_package_hash:account_hash=&#x27;account-hash-$CONTRACT_PACKAGE_HASH&#x27;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --session-arg &quot;contract_hash:account_hash=&#x27;account-hash-$CONTRACT_HASH&#x27;&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Alice needs a container access key for the contract package in her named keys.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="verifying-seigniorage-allocations">Verifying seigniorage allocations<a class="hash-link" href="#verifying-seigniorage-allocations" title="Direct link to heading">‚Äã</a></h3><p><a href="https://www.investopedia.com/terms/s/seigniorage.asp" target="_blank" rel="noopener noreferrer">Seigniorage</a> allocations should be zero at each switch block. This is the related configuration:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">compute_rewards = false</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Validator stakes should not increase on each switch block. Run this command to verify this:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">casper-client get-era-info -n $NODE_ADDR -b 153</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The total supply shouldn&#x27;t increase, and the validator&#x27;s stakes should remain the same.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="operating-guide">Operating guide<a class="hash-link" href="#operating-guide" title="Direct link to heading">‚Äã</a></h3><p>Some configuration options such as <code>allow_auction_bids</code> require a private chain operator to perform specific tasks manually through a network upgrade with chainspec and contents of <code>global_state.toml</code> file generated by a provided tool <code>global-state-update-gen</code>.</p><p>You can find this tool by either downloading a package or by installing it manually from the sources:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ cargo install --git https://github.com/casper-network/casper-node/ --tag private-1.4.6 global-state-update-gen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ global-state-update-gen --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Global State Update Generator 0.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Generates a global state update file based on the supplied parameters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">USAGE:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    global-state-update-gen [SUBCOMMAND]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FLAGS:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -h, --help       Prints help information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -V, --version    Prints version information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SUBCOMMANDS:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    balances                    Generates an update changing account balances</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    generate-admins             Generates entries to create new admin accounts on a private chain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    help                        Prints this message or the help of the given subcommand(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    system-contract-registry    Generates an update creating the system contract registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    validators                  Generates an update changing the validators set</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The standard output of running commands listed above is the content of a <code>global_state.toml</code> file, which contains a list of direct global state modifications.</p><p>Example output of running a <code>generate-admins</code> subcommand:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[[entries]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key = &quot;balance-97bbcc2425b3eda5149a893c6180b62f1472d5143bb1450d01c8e1e96be09f13&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">value = &quot;AAIAAAABCgg=&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[entries]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key = &quot;uref-97bbcc2425b3eda5149a893c6180b62f1472d5143bb1450d01c8e1e96be09f13-007&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">value = &quot;AAAAAAAJ&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[entries]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key = &quot;account-hash-ac2f4caa3e3ce1cd1dfb3d089854020b18a50cac49977d0a4c873c4d3d5a2409&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">value = &quot;AawvTKo+POHNHfs9CJhUAgsYpQysSZd9CkyHPE09WiQJAAAAAJe7zCQls+2lFJqJPGGAti8UctUUO7FFDQHI4elr4J8TBwEAAACsL0yqPjzhzR37PQiYVAILGKUMrEmXfQpMhzxNPVokCQEBAQ==&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># total supply increases from 200000000000000000 to 200000000000000010</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[entries]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key = &quot;uref-f8475fd4125484be39a0793530f09a29d220ffda8e48387b3d2194ddfc22894e-007&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">value = &quot;AAkAAAAICgAUu/CKxgII&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Currently, this tool outputs contents into standard output. You should redirect standard output to a file named <code>global_state.toml</code> and place this file in the same directory as <code>chainspec.toml</code> before performing a network upgrade.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$ global-state-update-gen generate-admins --data-dir $DATA_DIR --state-hash $STATE_HASH --admin NEW_PUBLIC_KEY,BALANCE &gt;&gt; global_state.toml</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>By using <code>&gt;&gt;</code> shell redirection you will always append contents to existing file without overwriting it. This is helpful when you need to chain multiple operations in a single upgrade.</p><p>Common options:</p><ul><li><code>--data-dir</code> path to a global state directory where <code>data.lmdb</code> can be found</li><li><code>--state-hash</code> is the state root hash at the latest block. You should use the client to obtain the most recent state root hash to generate the <code>global_state.toml</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="rotating-validators">Rotating validators<a class="hash-link" href="#rotating-validators" title="Direct link to heading">‚Äã</a></h3><p>The following command rotates the validator set. Perform a network upgrade with a <code>global_state.toml</code> with the new entries generated by the <code>global-state-update-gen</code> command.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">global-state-update-gen validators \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data-dir $DATA_DIR \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --state-hash $STATE_ROOT_HASH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --validator NEW_PUBLIC_KEY,NEW_STAKE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --validator NEW_PUBLIC_KEY2,NEW_STAKE2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="adding-new-administrators">Adding new administrators<a class="hash-link" href="#adding-new-administrators" title="Direct link to heading">‚Äã</a></h3><p>The following command produces the administrator content in the <code>global_state.toml</code> file.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx sh"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">global-state-update-gen generate-admins --admin NEW_PUBLIC_KEY,NEW_BALANCE --data-dir $DATA_DIR --state-hash $STATE_ROOT_HASH</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Remember that new administrators can be created, and the validator set can also be rotated in a single update.</p><p>The <code>chainspec.toml</code> file should contain the following entries that include new administrators as well as existing ones for an upgrade:</p><div class="codeBlockContainer_I0IT language-toml theme-code-block"><div class="codeBlockContent_wNvx toml"><pre tabindex="0" class="prism-code language-toml codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[core]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">administrators = [&quot;NEW_PUBLIC_KEY&quot;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>After this step, the private network would be ready for use.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/casper-network/docs/tree/main/source/docs/casper/workflow/setup-private-network.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/workflow/testnet-faucet/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Funding Testnet Accounts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/workflow/staging-files-for-new-network/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Staging Files for a New Network</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#step-1-setting-up-a-validator-node" class="table-of-contents__link toc-highlight">Step 1. Setting up a Validator Node</a></li><li><a href="#step-2-setting-up-the-directory" class="table-of-contents__link toc-highlight">Step 2. Setting up the Directory</a></li><li><a href="#step-3-configuring-the-genesis-block" class="table-of-contents__link toc-highlight">Step 3. Configuring the Genesis Block</a><ul><li><a href="#unrestricted-transfers-configuration" class="table-of-contents__link toc-highlight">Unrestricted transfers configuration</a></li><li><a href="#refund-handling-configuration" class="table-of-contents__link toc-highlight">Refund handling configuration</a></li><li><a href="#fee-handling-configuration" class="table-of-contents__link toc-highlight">Fee handling configuration</a></li><li><a href="#auction-behavior-configuration" class="table-of-contents__link toc-highlight">Auction behavior configuration</a></li></ul></li><li><a href="#step-4-configuring-the-administrator-accounts" class="table-of-contents__link toc-highlight">Step 4. Configuring the Administrator Accounts</a><ul><li><a href="#configuring-administrator-accounts" class="table-of-contents__link toc-highlight">Configuring administrator accounts</a></li><li><a href="#generating-new-administrator-accounts" class="table-of-contents__link toc-highlight">Generating new administrator accounts</a></li><li><a href="#managing-accounts-and-smart-contracts" class="table-of-contents__link toc-highlight">Managing accounts and smart contracts</a></li></ul></li><li><a href="#step-5-starting-the-casper-node" class="table-of-contents__link toc-highlight">Step 5. Starting the Casper Node</a></li><li><a href="#step-6-rotating-the-validator-accounts" class="table-of-contents__link toc-highlight">Step 6. Rotating the Validator Accounts</a></li><li><a href="#step-7-testing-the-private-network" class="table-of-contents__link toc-highlight">Step 7. Testing the Private Network</a><ul><li><a href="#sample-configuration-files" class="table-of-contents__link toc-highlight">Sample configuration files</a></li><li><a href="#specifying-ip-addresses" class="table-of-contents__link toc-highlight">Specifying IP addresses</a></li><li><a href="#setting-up-the-node" class="table-of-contents__link toc-highlight">Setting up the node</a></li><li><a href="#network-access-control" class="table-of-contents__link toc-highlight">Network access control</a></li><li><a href="#funding-alices-account" class="table-of-contents__link toc-highlight">Funding Alice&#39;s account</a></li><li><a href="#adding-a-bid-as-alice" class="table-of-contents__link toc-highlight">Adding a bid as Alice</a></li><li><a href="#disabling-alices-account" class="table-of-contents__link toc-highlight">Disabling Alice&#39;s account</a></li><li><a href="#enabling-alices-account" class="table-of-contents__link toc-highlight">Enabling Alice&#39;s account</a></li><li><a href="#enabling-a-contract" class="table-of-contents__link toc-highlight">Enabling a contract</a></li><li><a href="#disabling-a-contract" class="table-of-contents__link toc-highlight">Disabling a contract</a></li><li><a href="#verifying-seigniorage-allocations" class="table-of-contents__link toc-highlight">Verifying seigniorage allocations</a></li><li><a href="#operating-guide" class="table-of-contents__link toc-highlight">Operating guide</a></li><li><a href="#rotating-validators" class="table-of-contents__link toc-highlight">Rotating validators</a></li><li><a href="#adding-new-administrators" class="table-of-contents__link toc-highlight">Adding new administrators</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"><div class="footer-inner-container">
    <div class="footer-top">
        <ul class="items">
            <li><a href="https://arxiv.org/pdf/2101.02159.pdf" target="_blank" rel="noopener">White Paper</a></li>
            <li>
                <a href="https://docs.casperlabs.io" target="_blank" rel="noopener"> Docs </a>
            </li>
            <li><a href="https://devxdao.com/" target="_blank" rel="noopener">Grant Program</a></li>
            <li><a href="https://casper.network/network/casper-association" target="_blank" rel="noopener">Casper Association</a></li>
        </ul>
    </div>
    <div class="footer-bottom">
        <ul class="items left">
            <li>
                <a href="https://casper.network/en/network" target="_blank" rel="noopener">
                    <img class="footer-logo" src="/icon/logo-white.svg" alt="Casper Logo">
                </a>
            </li>
            <li>¬© 2021 Casper Association</li>
        </ul>
        <ul class="items right">
            <li class="trademark">
                <a href="https://casper.network/network/trademark-policy" target="_blank" rel="noopener">Trademark Policy and Guidelines</a>
            </li>
        </ul>
    </div>
</div>
</div></div></div></footer></div>
<script src="/assets/js/runtime~main.12468f53.js"></script>
<script src="/assets/js/main.248ea3bd.js"></script>
</body>
</html>